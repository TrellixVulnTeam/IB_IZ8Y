from ib_insync import *import numpy as npimport timeib = IB()ib.connect('127.0.0.1', 7497, clientId=10)# stock ticker datastock = Stock('AAPL', 'SMART', 'USD')market_data = ib.reqMktData(stock, '', False, False)# option ticker datastrike_price = 122option_month = str(time.localtime().tm_mon)option_year = str(time.localtime().tm_year)if len(option_month) == 1:    option_month = '0'+option_monthoption_contract = Option('AAPL', '20210401', strike_price, 'C', 'SMART', '100', 'USD')option = ib.reqMktData(option_contract, '', False, False)executed_trades = ib.reqExecutions()count = 0trades = 0def onPendingTicker(ticker):    global count, trades    last_price = market_data.last    last_option_price = option.last    if last_price >= 120.00 and count == 0 and trades == 0:        ib.placeOrder(option_contract, MarketOrder('BUY', 5))        count += 5        print('Order Filled BUY', count, '@', last_price)    elif last_price >= 121.00 and count != 0 and trades != 1:        ib.placeOrder(option_contract, MarketOrder('SELL', 3))        count -= 3        trades = 1        print('Order Filled Sell', 3, '@', last_price, ", Trades: ", trades)    elif last_price >= 121.25 and count != 0 and trades != 2:        ib.placeOrder(option_contract, MarketOrder('SELL', 1))        count -= 1        trades = 2        print('Order Filled Sell', 3, '@', last_price, ", Trades: ", trades)    elif last_price >= 121.52 and count != 0:        ib.placeOrder(option_contract, MarketOrder('SELL', 2))        count -= 2        trades = 3        print('Order Filled Sell', 2, '@', last_price, ", Trades: ", trades)        count = 0        trades = 0ib.pendingTickersEvent += onPendingTickerib.run()