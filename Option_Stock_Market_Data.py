from ib_insync import *import numpy as npimport timeib = IB()ib.connect('127.0.0.1', 7497, clientId=2)spy = 'SPY'aapl = 'AAPL'# stock ticker datastock = Stock(aapl, 'SMART', 'USD')market_data = ib.reqMktData(stock, '', False, False)# option ticker datastrike_price = 120option_month = str(time.localtime().tm_mon)option_year = str(time.localtime().tm_year)if len(option_month) == 1:    option_month = '0'+option_monthoption_contract = Option(aapl, option_year+option_month+'19', strike_price, 'C', 'SMART', '100', 'USD')option = ib.reqMktData(option_contract, '', False, False)def onPendingTicker(ticker):    #print(aapl, 'stock:', market_data.last)    print(aapl, 'option:', option.last)strike_price = np.round(market_data.last)# order = MarketOrder('BUY', 1)# trade = ib.placeOrder(option, order)ib.pendingTickersEvent += onPendingTickerib.run()